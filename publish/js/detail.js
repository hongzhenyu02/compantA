"use strict";$(function(){var a=function(t){for(var n=location.search.slice(1).split("&"),a=0;a<n.length;a++){var o=n[a].split("=");if(t===o[0])return o[1]}}("id");console.log(a);var l=[],o=$("#box"),i="";$.ajax({url:"/server/data/1.json",data:{id:a},type:"get",dataType:"json",success:function(t){console.log(t),l=t.list,console.log(l);var n=t.list.find(function(t,n){return console.log(t),a===t.deal_hid});i='\n            <div class="col-5">\n                <div class="card">\n                    <img src="'+n.deal_img+'" class="card-img-top" alt="...">\n                    <div class="card-body">\n                        <p class="card-text">'+n.deal_tit+'</p>\n                    </div>\n                </div>\n            </div>\n            <div class="col-5 d-flex flex-column justify-content-end">\n                <h3>￥'+n.comments_number+"</h3>\n                <h3>库存:"+n.deal_num+'</h3>\n                <button data-id="'+n.deal_hid+'" type="button" class="btn btn-primary">加入购物车</button>\n            </div>\n            ',o.html(i),o.on("click",".btn",function(){var n=$(this).attr("data-id");console.log("我是按钮"+$(this).attr("data-id"));var t=l.find(function(t){return t.deal_hid===n});console.log(t);var a=localStorage.getItem("shoppingCart")||"[]",o=JSON.parse(a),i=o.find(function(t){return t.deal_hid===n});i?i.count++:(t.count=1,o.push(t)),localStorage.setItem("shoppingCart",JSON.stringify(o)),location.href="../html/shoppingcart.html"})}}),$.ajax({url:"/server/data/1.json",type:"get"})});